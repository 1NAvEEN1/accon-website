import{r as N}from"./react-dom-68a5aee2.js";import"./hoist-non-react-statics-3f8ebaa8.js";import{r as u}from"./react-ab981d54.js";import"./react-is-e5978b8b.js";import{w as R}from"./use-sync-external-store-2c723af6.js";function U(e){e()}let w=U;const L=e=>w=e,M=()=>w,g=Symbol.for("react-redux-context"),m=typeof globalThis<"u"?globalThis:{};function T(){var e;if(!u.createContext)return{};const o=(e=m[g])!=null?e:m[g]=new Map;let r=o.get(u.createContext);return r||(r=u.createContext(null),o.set(u.createContext,r)),r}const S=T();function E(e=S){return function(){return u.useContext(e)}}const V=E(),z=()=>{throw new Error("uSES not initialized!")};let k=z;const B=e=>{k=e},D=(e,o)=>e===o;function P(e=S){const o=e===S?V:E(e);return function(t,s={}){const{equalityFn:n=D,stabilityCheck:i=void 0,noopCheck:f=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:c,getServerState:b,stabilityCheck:d,noopCheck:y}=o();u.useRef(!0);const x=u.useCallback({[t.name](p){return t(p)}}[t.name],[t,d,i]),a=k(c.addNestedSub,l.getState,b||l.getState,x,n);return u.useDebugValue(a),a}}const F=P();function W(){const e=M();let o=null,r=null;return{clear(){o=null,r=null},notify(){e(()=>{let t=o;for(;t;)t.callback(),t=t.next})},get(){let t=[],s=o;for(;s;)t.push(s),s=s.next;return t},subscribe(t){let s=!0,n=r={callback:t,next:null,prev:r};return n.prev?n.prev.next=n:o=n,function(){!s||o===null||(s=!1,n.next?n.next.prev=n.prev:r=n.prev,n.prev?n.prev.next=n.next:o=n.next)}}}}const v={notify(){},get:()=>[]};function H(e,o){let r,t=v,s=0,n=!1;function i(p){b();const h=t.subscribe(p);let C=!1;return()=>{C||(C=!0,h(),d())}}function f(){t.notify()}function l(){a.onStateChange&&a.onStateChange()}function c(){return n}function b(){s++,r||(r=o?o.addNestedSub(l):e.subscribe(l),t=W())}function d(){s--,r&&s===0&&(r(),r=void 0,t.clear(),t=v)}function y(){n||(n=!0,b())}function x(){n&&(n=!1,d())}const a={addNestedSub:i,notifyNestedSubs:f,handleChangeWrapper:l,isSubscribed:c,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>t};return a}const I=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",K=I?u.useLayoutEffect:u.useEffect;function G({store:e,context:o,children:r,serverState:t,stabilityCheck:s="once",noopCheck:n="once"}){const i=u.useMemo(()=>{const c=H(e);return{store:e,subscription:c,getServerState:t?()=>t:void 0,stabilityCheck:s,noopCheck:n}},[e,t,s,n]),f=u.useMemo(()=>e.getState(),[e]);K(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),f!==e.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,f]);const l=o||S;return u.createElement(l.Provider,{value:i},r)}B(R.useSyncExternalStoreWithSelector);L(N.unstable_batchedUpdates);export{G as P,F as u};
